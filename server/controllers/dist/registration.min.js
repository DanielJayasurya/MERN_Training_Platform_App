"use strict";function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Registration=require("../models/model"),getRegistrations=function(e,t){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Registration.find().sort({created_at:-1}));case 3:r=e.sent,t.status(200).json(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching registrations:",e.t0),t.status(500).json({message:"Internal Server Error"});case 11:case"end":return e.stop()}},null,null,[[0,7]])},postRegistration=function(t,r){var n,s,a,o,i,u,c,g,p,l;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.body,s=n.firstName,a=n.lastName,o=n.phoneNumber,i=n.email,u=n.qualification,c=n.gender,g=n.location,p=n.course,s&&a&&o&&i&&u&&c&&g&&p){e.next=4;break}return e.abrupt("return",r.status(400).json({message:"All fields are required."}));case 4:return l=new Registration({firstName:s,lastName:a,phoneNumber:o,email:i,qualification:u,gender:c,location:g,course:p,status:"pending"}),e.next=7,regeneratorRuntime.awrap(l.save());case 7:r.status(201).json({message:"Course registration successful.",registration:_objectSpread({},l.toObject(),{status:"pending"})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error registering course:",e.t0),r.status(500).json({message:"Internal Server Error"});case 14:case"end":return e.stop()}},null,null,[[0,10]])},deleteRegistration=function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Registration.findByIdAndDelete(n));case 4:if(e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({message:"Registration not found."}));case 7:r.status(200).json({message:"Registration deleted successfully."}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error deleting registration:",e.t0),r.status(500).json({message:"Internal Server Error"});case 14:case"end":return e.stop()}},null,null,[[1,10]])},updateRegistration=function(t,r){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Registration.findByIdAndUpdate(n,t.body,{new:!0}));case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",r.status(404).json({error:"Registration not found"}));case 7:r.json(s),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error updating registration:",e.t0),r.status(500).json({error:"Internal Server Error"});case 14:case"end":return e.stop()}},null,null,[[1,10]])},updateRegistrationStatus=function(t,r){var n,s,a,o,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.id,s=t.body,a=s.status,o=s.date,e.prev=2,console.log("Received registration_id:",n),e.next=6,regeneratorRuntime.awrap(Registration.findByIdAndUpdate(n,{status:a,date:o},{new:!0}));case 6:if(i=e.sent){e.next=10;break}return console.error("Registration not found in the database."),e.abrupt("return",r.status(404).json({error:"Registration not found"}));case 10:console.log("Updated registration:",i),r.status(200).json(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Error updating registration status:",e.t0),r.status(500).json({error:"Internal Server Error"});case 18:case"end":return e.stop()}},null,null,[[2,14]])};module.exports={getRegistrations:getRegistrations,postRegistration:postRegistration,deleteRegistration:deleteRegistration,updateRegistration:updateRegistration,updateRegistrationStatus:updateRegistrationStatus};
//# sourceMappingURL=registration.min.js.map
